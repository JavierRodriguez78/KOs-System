set timeout=5
set default=0

# Enable graphics modules (GRUB2) so we can set a framebuffer mode
insmod all_video
insmod gfxterm

# You can tweak these if your firmware doesn't support 1024x768x32
set gfxmode=1024x768x32
set gfxpayload=1024x768x32

menuentry "KOS - graphic mode (Multiboot2)" {
    insmod all_video
    insmod gfxterm
    set gfxpayload=1024x768x32
    # Pass a hint arg 'gfx' (optional) for kernel logs
    multiboot2 /boot/mykernel.bin gfx
}

menuentry "KOS - graphic mode (debug)" {
    insmod all_video
    insmod gfxterm
    set gfxpayload=1024x768x32
    # Enable kernel debug logs for easier diagnostics
    multiboot2 /boot/mykernel.bin gfx debug log=debug
}

menuentry "KOS - text mode (Multiboot1)" {
    # Fallback entry without framebuffer
    multiboot /boot/mykernel.bin text
}
