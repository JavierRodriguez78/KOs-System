cfg

set timeout=5
set default=0

# Text-mode boot: force console output and VGA text for full compatibility
menuentry "KOS - text mode" {
    terminal_output console
    set gfxpayload=text
    multiboot2 /boot/mykernel.bin text debug
}

# Graphics-mode boot: load VBE/gfxterm, set a 1024x768x32 framebuffer, and keep it for the kernel
menuentry "KOS - graphic mode (1024x768x32)" {
    insmod vbe
    insmod video
    insmod gfxterm
    set gfxmode=1024x768x32
    set gfxpayload=keep
    terminal_output gfxterm
    # Pass desired flags to the kernel via cmdline (read from Multiboot2 cmdline)
    multiboot2 /boot/mykernel.bin gfx debug mouse_poll=always
}

# Optional explicit debug entry (text mode)
menuentry "KOS - text mode (debug)" {
    terminal_output console
    set gfxpayload=text
    multiboot2 /boot/mykernel.bin text debug
}